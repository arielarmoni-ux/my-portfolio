<script>
    // אותה רשימת תיקיות בדיוק
    const projectFolders = ["Wonders-of-the-Deep", "The-Shadow-of-Color", "We-The-People", "A-Treasury-of-Words"];
    
    const sideList = document.getElementById('side-project-list');
    const params = new URLSearchParams(window.location.search);
    const folder = params.get('folder');

    async function initProject() {
        // בניית תפריט הצד מתוך קבצי ה-info של כולם
        for (const f of projectFolders) {
            try {
                const res = await fetch(`images/${f}/info.txt`);
                const t = await res.text();
                const title = t.split('\n')[0].trim();
                sideList.innerHTML += `<a href="project.html?folder=${f}">${title}</a>`;
            } catch(e) {}
        }

        // טעינת הפרויקט הספציפי
        if (folder) {
            try {
                const res = await fetch(`images/${folder}/info.txt`);
                const text = await res.text();
                const lines = text.split('\n').filter(l => l.trim() !== "");

                // 1. כותרת הפרויקט (שורה ראשונה)
                document.getElementById('project-title').innerText = lines[0];

                // 2. עיבוד שורות המידע והתיאור
                const meta = document.getElementById('project-meta');
                const descContainer = document.getElementById('project-desc');
                
                for (let i = 1; i < lines.length; i++) {
                    const line = lines[i].trim();
                    
                    // בדיקה אם זו השורה האחרונה (התיאור)
                    if (i === lines.length - 1) {
                        descContainer.innerText = line.replace(/Description:\s*/i, "");
                    } 
                    // שורות עם נקודתיים (Role, Date, וכו')
                    else if (line.includes(":")) {
                        const parts = line.split(":");
                        const key = parts[0].trim();
                        const value = parts.slice(1).join(":").trim();
                        meta.innerHTML += `<div class="meta-item"><b>${key}</b> ${value}</div>`;
                    }
                }

                // 3. טעינת גלריית תמונות (1.jpg עד 25.jpg)
                const gal = document.getElementById('gallery');
                for (let i = 1; i <= 25; i++) {
                    const img = new Image();
                    img.src = `images/${folder}/${i}.jpg`;
                    img.onload = () => gal.appendChild(img);
                }
            } catch (e) { console.error("Error loading project info"); }
        }
    }
    initProject();
</script>
