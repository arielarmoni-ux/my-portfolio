<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project | Ariel Armoni</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="site-wrapper">
        <header>
            <div class="header-left">
                <div class="nav-wrapper">
                    <button class="menu-toggle" id="menu-btn">
                        <span></span><span></span><span></span>
                    </button>
                </div>
                <a href="index.html" class="logo">ARIEL ARMONI</a>
                <span class="sub-logo">Exhibition Architecture</span>
            </div>
        </header>

        <main style="padding-top: 60px;">
            <div style="text-align: center; padding: 40px 5%;">
                <h1 id="project-title" style="font-size: 20px; letter-spacing: 4px; text-transform: uppercase; font-weight: 400; margin-bottom: 20px;"></h1>
                <div id="project-meta" class="project-meta"></div>
                <div id="project-desc" class="project-description" style="max-width: 800px; margin: 30px auto; text-align: left; direction: ltr;"></div>
            </div>
            <div id="gallery" class="gallery"></div>
        </main>
    </div>

    <script src="sidebar.js"></script>
    <script>
        async function initProject() {
            const folder = new URLSearchParams(window.location.search).get('folder');
            if(!folder) return;

            const res = await fetch(`${baseURL}/images/${folder}/info.txt?v=${Date.now()}`);
            const text = await res.text();
            const lines = text.split(/\r?\n/).map(l => l.trim()).filter(l => l !== "");
            
            document.getElementById('project-title').innerText = lines[0];
            
            const meta = document.getElementById('project-meta');
            const desc = document.getElementById('project-desc');

            lines.slice(1).forEach(line => {
                if(line.includes(":")) {
                    const [k, ...v] = line.split(":");
                    meta.innerHTML += `<div><strong>${k.trim()}:</strong> ${v.join(":").trim()}</div>`;
                } else {
                    desc.innerText += (desc.innerText ? "\n\n" : "") + line;
                }
            });

            for(let i=1; i<=30; i++) {
                const img = new Image();
                img.src = `${baseURL}/images/${folder}/${i.toString().padStart(2, '0')}.jpg`;
                img.onload = () => document.getElementById('gallery').appendChild(img);
            }
        }
        initProject();
    </script>
</body>
</html>
